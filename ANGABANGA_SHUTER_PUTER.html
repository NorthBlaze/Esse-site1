<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Арканоид</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body, html {
            height: 100%;
            background: #222;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        canvas {
            display: block;
            background-color: #000;
            border: 1px solid #fff;
            width: 100%;
            height: 100%;
            max-width: 100%;
            max-height: 100%;
        }
        .game-info {
            position: absolute;
            color: white;
            font-size: 20px;
            z-index: 10;
        }
        .score {
            top: 10px;
            left: 10px;
        }
        .game-over {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            text-align: center;
        }
        .restart-button {
            background-color: #f1c40f;
            color: #000;
            border: none;
            padding: 10px 20px;
            font-size: 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
        .restart-button:hover {
            background-color: #e67e22;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<div class="game-info score">
    Очки: <span id="score">0</span>
</div>

<div class="game-info game-over" id="gameOverMessage">
    Игра окончена
    <br><button class="restart-button" id="restartBtn">Начать заново</button>
</div>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Настройка canvas
    let canvasWidth, canvasHeight;

    function resizeCanvas() {
        canvasWidth = window.innerWidth;
        canvasHeight = window.innerHeight;
        canvas.width = canvasWidth;
        canvas.height = canvasHeight;
    }

    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    // Игровые параметры
    const paddleWidth = 100;
    const paddleHeight = 20;
    const ballRadius = 10;
    let paddleX, paddleSpeed = 6;
    let ballX, ballY, ballSpeedX, ballSpeedY;
    let bricks = [];
    const brickWidth = 75;
    const brickHeight = 30;
    const brickPadding = 10;
    const brickOffsetTop = 30;
    const brickOffsetLeft = 30;
    let score = 0;
    let gameOver = false;

    // Обновление игры
    function startGame() {
        // Инициализация элементов
        paddleX = (canvasWidth - paddleWidth) / 2;
        ballX = canvasWidth / 2;
        ballY = canvasHeight - 30;
        ballSpeedX = 4;
        ballSpeedY = -4;

        // Сброс очков и состояния
        score = 0;
        gameOver = false;
        document.getElementById("score").textContent = score;
        document.getElementById("gameOverMessage").style.display = "none";

        // Создание блоков
        createBricks();

        // Начало игрового цикла
        gameLoop();
    }

    // Создание блоков
    function createBricks() {
        bricks = [];
        for (let row = 0; row < 5; row++) {
            bricks[row] = [];
            for (let col = 0; col < Math.floor((canvasWidth - brickOffsetLeft * 2) / (brickWidth + brickPadding)); col++) {
                bricks[row][col] = { x: 0, y: 0, status: 1 };
            }
        }
    }

    // Обновление игры
    function gameLoop() {
        if (gameOver) return;
        
        ctx.clearRect(0, 0, canvasWidth, canvasHeight);

        // Двигаем мяч
        ballX += ballSpeedX;
        ballY += ballSpeedY;

        // Отражение мяча от стен
        if (ballX + ballRadius > canvasWidth || ballX - ballRadius < 0) {
            ballSpeedX = -ballSpeedX;
        }
        if (ballY - ballRadius < 0) {
            ballSpeedY = -ballSpeedY;
        } else if (ballY + ballRadius > canvasHeight - paddleHeight) {
            if (ballX > paddleX && ballX < paddleX + paddleWidth) {
                ballSpeedY = -ballSpeedY;
                score++;
                document.getElementById("score").textContent = score;
            } else if (ballY + ballRadius > canvasHeight) {
                gameOver = true;
                document.getElementById("gameOverMessage").style.display = "block";
                return;
            }
        }

        // Отражение от блоков
        for (let row = 0; row < bricks.length; row++) {
            for (let col = 0; col < bricks[row].length; col++) {
                const brick = bricks[row][col];
                if (brick.status === 1) {
                    if (ballX > brick.x && ballX < brick.x + brickWidth && ballY > brick.y && ballY < brick.y + brickHeight) {
                        ballSpeedY = -ballSpeedY;
                        brick.status = 0;
                        score += 10;
                        document.getElementById("score").textContent = score;
                    }
                }
            }
        }

        // Рисуем блоки
        for (let row = 0; row < bricks.length; row++) {
            for (let col = 0; col < bricks[row].length; col++) {
                if (bricks[row][col].status === 1) {
                    const brick = bricks[row][col];
                    brick.x = brickOffsetLeft + col * (brickWidth + brickPadding);
                    brick.y = brickOffsetTop + row * (brickHeight + brickPadding);
                    ctx.fillStyle = "#0095DD";
                    ctx.fillRect(brick.x, brick.y, brickWidth, brickHeight);
                }
            }
        }

        // Рисуем ракетку
        ctx.beginPath();
        ctx.rect(paddleX, canvasHeight - paddleHeight, paddleWidth, paddleHeight);
        ctx.fillStyle = "#0095DD";
        ctx.fill();
        ctx.closePath();

        // Рисуем мяч
        ctx.beginPath();
        ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2);
        ctx.fillStyle = "#0095DD";
        ctx.fill();
        ctx.closePath();

        requestAnimationFrame(gameLoop);
    }

    // Двигаем ракетку
    let rightPressed = false;
    let leftPressed = false;

    document.addEventListener("keydown", keyDownHandler, false);
    document.addEventListener("keyup", keyUpHandler, false);

    function keyDownHandler(e) {
        if (e.key === "Right" || e.key === "ArrowRight") {
            rightPressed = true;
        } else if (e.key === "Left" || e.key === "ArrowLeft") {
            leftPressed = true;
        }
    }

    function keyUpHandler(e) {
        if (e.key === "Right" || e.key === "ArrowRight") {
            rightPressed = false;
        } else if (e.key === "Left" || e.key === "ArrowLeft") {
            leftPressed = false;
        }
    }

    // Управление мышью для мобильных устройств
    let mouseX = 0;
    canvas.addEventListener("mousemove", function(event) {
        mouseX = event.clientX || event.touches[0].clientX;
        paddleX = mouseX - paddleWidth / 2;
        if (paddleX < 0) paddleX = 0;
        if (paddleX + paddleWidth > canvasWidth) paddleX = canvasWidth - paddleWidth;
    });

    // Кнопка для перезапуска игры
    document.getElementById("restartBtn").addEventListener("click", function() {
        startGame();
    });

    startGame(); // Начало игры
</script>

</body>
</html>
